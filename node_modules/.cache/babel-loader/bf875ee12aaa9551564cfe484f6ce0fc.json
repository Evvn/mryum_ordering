{"ast":null,"code":"import _classCallCheck from \"/Users/michaelfoster/Git/mryum/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/michaelfoster/Git/mryum/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/michaelfoster/Git/mryum/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/michaelfoster/Git/mryum/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/michaelfoster/Git/mryum/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/michaelfoster/Git/mryum/src/components/Menu/MenuContainer.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport HorizontalScrollNav from '../Common/HorizontalScrollNav';\nimport Filter from './Filter.js'; // eslint-disable-next-line\n\nimport LanguageSelect from './LanguageSelect.js';\nimport Menu from './Menu';\nimport { persistStore } from 'redux-persist';\nimport Footer from './Footer';\nimport Water from './Water';\nimport LoadingScreen from '../LoadingScreen/LoadingScreen';\n\nvar MenuContainer =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(MenuContainer, _React$Component);\n\n  function MenuContainer(props) {\n    var _this;\n\n    _classCallCheck(this, MenuContainer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MenuContainer).call(this, props));\n    var paramArray = window.location.href.split('/');\n    _this.params = {\n      requestedVenue: paramArray[3],\n      item: paramArray.length === 5 ? paramArray[4] : false\n    };\n    _this.state = {\n      update: false\n    };\n    return _this;\n  }\n\n  _createClass(MenuContainer, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this$props = this.props,\n          getMenuData = _this$props.getMenuData,\n          bffRes = _this$props.bffRes,\n          venue = _this$props.venue;\n\n      if (!bffRes || this.params.requestedVenue !== venue) {\n        getMenuData(this.params.requestedVenue);\n      }\n    }\n  }, {\n    key: \"componentWillUpdate\",\n    value: function componentWillUpdate() {\n      var _this$props2 = this.props,\n          getMenuData = _this$props2.getMenuData,\n          bffRes = _this$props2.bffRes,\n          venue = _this$props2.venue;\n\n      if (!bffRes || this.params.requestedVenue !== venue) {\n        getMenuData(this.params.requestedVenue);\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (!this.state.update) {\n        this.setState({\n          update: true\n        });\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      persistStore(this.props).purge();\n    }\n  }, {\n    key: \"routeToItemDetail\",\n    value: function routeToItemDetail(e, id) {\n      e.stopPropagation();\n      window.location = window.location.href + \"/\".concat(id);\n    }\n  }, {\n    key: \"getHeader\",\n    value: function getHeader() {\n      var _this$props3 = this.props,\n          venue = _this$props3.venue,\n          sectionPositions = _this$props3.sectionPositions,\n          showBackArrow = _this$props3.showBackArrow,\n          showFilter = _this$props3.showFilter,\n          showLanguageSelect = _this$props3.showLanguageSelect,\n          filter = _this$props3.filter,\n          updateFilter = _this$props3.updateFilter,\n          updateLang = _this$props3.updateLang,\n          lang = _this$props3.lang;\n      document.title = venue + \" Menu\";\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(\"header\", {\n        className: \"header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, showBackArrow ? React.createElement(\"img\", {\n        src: \"/icons/arrow-left-solid-white.svg\",\n        className: \"headerBackArrow\",\n        alt: \"back arrow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }) : null, !!venue ? React.createElement(\"h1\", {\n        className: \"venue\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, venue) : null, showFilter && React.createElement(Filter, {\n        filter: filter,\n        updateFilter: updateFilter,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }), Object.keys(sectionPositions).length === 0 ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, \"loading\") : React.createElement(HorizontalScrollNav, {\n        sectionPositions: sectionPositions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }), showLanguageSelect && React.createElement(LanguageSelect, {\n        lang: lang,\n        updateLang: updateLang,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      })));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      // eslint-disable-next-line\n      var _this$props4 = this.props,\n          venueName = _this$props4.venueName,\n          sectionPositions = _this$props4.sectionPositions,\n          showBackArrow = _this$props4.showBackArrow,\n          showFilter = _this$props4.showFilter,\n          showLanguageSelect = _this$props4.showLanguageSelect,\n          filter = _this$props4.filter,\n          updateFilter = _this$props4.updateFilter,\n          current = _this$props4.current,\n          updateLang = _this$props4.updateLang,\n          lang = _this$props4.lang,\n          bffRes = _this$props4.bffRes,\n          isLoading = _this$props4.isLoading;\n      console.log(sectionPositions);\n      document.title = venueName + \" Menu\";\n      var itemId = this.params.item;\n      return isLoading ? React.createElement(LoadingScreen, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }) : React.createElement(\"div\", {\n        className: \"Menu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, this.getHeader(), React.createElement(\"div\", {\n        className: \"menu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(Menu, {\n        menuItemKeys: Object.keys(bffRes),\n        menuItems: bffRes,\n        filter: filter,\n        lang: lang,\n        itemId: itemId,\n        routeToItemDetail: this.routeToItemDetail,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }), React.createElement(Water, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }), React.createElement(Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return MenuContainer;\n}(React.Component);\n\n;\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    bffRes: state.persistentMenu.bffRes,\n    isLoading: state.persistentMenu.isLoading,\n    venue: state.persistentMenu.venue,\n    sectionPositions: state.menu.sectionPositions,\n    filter: state.persistentMenu.filter,\n    lang: state.persistentMenu.lang\n  };\n};\n\nexport default connect(mapStateToProps)(MenuContainer);","map":{"version":3,"sources":["/Users/michaelfoster/Git/mryum/src/components/Menu/MenuContainer.js"],"names":["React","connect","bindActionCreators","HorizontalScrollNav","Filter","LanguageSelect","Menu","persistStore","Footer","Water","LoadingScreen","MenuContainer","props","paramArray","window","location","href","split","params","requestedVenue","item","length","state","update","getMenuData","bffRes","venue","setState","purge","e","id","stopPropagation","sectionPositions","showBackArrow","showFilter","showLanguageSelect","filter","updateFilter","updateLang","lang","document","title","Object","keys","venueName","current","isLoading","console","log","itemId","getHeader","routeToItemDetail","Component","mapStateToProps","persistentMenu","menu"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {connect} from 'react-redux'\nimport {bindActionCreators} from 'redux'\nimport HorizontalScrollNav from '../Common/HorizontalScrollNav';\nimport Filter from './Filter.js';\n// eslint-disable-next-line\nimport LanguageSelect from './LanguageSelect.js';\nimport Menu from './Menu';\nimport { persistStore } from 'redux-persist'\nimport Footer from './Footer';\nimport Water from './Water';\nimport LoadingScreen from '../LoadingScreen/LoadingScreen';\n\nclass MenuContainer extends React.Component {\n  constructor(props) {\n    super(props)\n\n    const paramArray = window.location.href.split('/');\n    this.params = {\n       requestedVenue: paramArray[3],\n       item: paramArray.length === 5 ? paramArray[4] : false,\n    }\n\n    this.state = {update: false}\n  }\n\n componentWillMount() {\n   const { getMenuData, bffRes, venue } = this.props;\n   if (!bffRes || this.params.requestedVenue !== venue) {\n     getMenuData(this.params.requestedVenue);\n   }\n }\n\n componentWillUpdate() {\n   const { getMenuData, bffRes, venue } = this.props;\n   if (!bffRes || this.params.requestedVenue !== venue) {\n     getMenuData(this.params.requestedVenue);\n   }\n }\n\n componentDidMount(){\n   if(!this.state.update){\n     this.setState({update: true})\n   }\n }\n\n componentWillUnmount() {\n   persistStore(this.props).purge();\n }\n\n routeToItemDetail(e, id) {\n   e.stopPropagation();\n   window.location = window.location.href + `/${id}`\n }\n\n\n  getHeader(){\n    const {\n      venue,\n      sectionPositions,\n      showBackArrow,\n      showFilter,\n      showLanguageSelect,\n      filter,\n      updateFilter,\n      updateLang,\n      lang,\n    } = this.props;\n\n    document.title = venue + \" Menu\";\n\n    return (\n      <div>\n        <header className=\"header\">\n          {/* back arrow for routing, control this and venuename via props */}\n          { showBackArrow ? <img src=\"/icons/arrow-left-solid-white.svg\" className=\"headerBackArrow\" alt=\"back arrow\"/> : null }\n          { !!venue ? <h1 className=\"venue\">{venue}</h1> : null }\n          { showFilter && <Filter filter={filter} updateFilter={updateFilter} /> }\n            { Object.keys(sectionPositions).length === 0 ? <span>loading</span> : <HorizontalScrollNav sectionPositions={sectionPositions}/>}\n          { showLanguageSelect && <LanguageSelect lang={lang} updateLang={updateLang} /> }\n          {/* <img className=\"cartIcon\" src=\"/icons/cart_icon.svg\" alt=\"cart\"/> */}\n          {/* need check to see when to display cart badge */}\n          {/* { hasCartItems && <div className=\"cartBadge\"/> } */}\n        </header>\n      </div>\n    );\n  }\n\n  render() {\n    // eslint-disable-next-line\n    const {\n      venueName,\n      sectionPositions,\n      showBackArrow,\n      showFilter,\n      showLanguageSelect,\n      filter,\n      updateFilter,\n      current,\n      updateLang,\n      lang,\n      bffRes,\n      isLoading,\n    } = this.props;\n\n    console.log(sectionPositions)\n\n    document.title = venueName + \" Menu\";\n    const itemId = this.params.item;\n\n    return (\n      isLoading ? <LoadingScreen/> : \n      (\n        <div className=\"Menu\">\n          {this.getHeader()}\n          <div className=\"menu\">\n            <Menu\n              menuItemKeys={Object.keys(bffRes)}\n              menuItems={bffRes}\n              filter={filter}\n              lang={lang}\n              itemId={itemId}\n              routeToItemDetail={this.routeToItemDetail}\n            />\n            <Water/>\n            <Footer/>\n          </div>\n        </div>\n      ) \n    );\n  }\n\n};\n\nconst mapStateToProps = state => ({\n  bffRes: state.persistentMenu.bffRes,\n  isLoading: state.persistentMenu.isLoading,\n  venue: state.persistentMenu.venue,\n  sectionPositions: state.menu.sectionPositions,\n  filter: state.persistentMenu.filter,\n  lang: state.persistentMenu.lang,\n});\n\nexport default connect(mapStateToProps)(MenuContainer)\n"]},"metadata":{},"sourceType":"module"}