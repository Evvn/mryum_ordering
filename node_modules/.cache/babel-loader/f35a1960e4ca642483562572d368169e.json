{"ast":null,"code":"import _classCallCheck from \"/Users/michaelfoster/Git/mryum-avc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/michaelfoster/Git/mryum-avc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/michaelfoster/Git/mryum-avc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/michaelfoster/Git/mryum-avc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/michaelfoster/Git/mryum-avc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/michaelfoster/Git/mryum-avc/src/components/Menu/Section.js\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport MenuItem from './MenuItem';\nimport MenuList from './MenuList';\nimport MenuInfo from './MenuInfo';\nimport uuid from 'uuid/v4';\n\nvar Section =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Section, _React$Component);\n\n  function Section() {\n    _classCallCheck(this, Section);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Section).apply(this, arguments));\n  }\n\n  _createClass(Section, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props = this.props,\n          name = _this$props.name,\n          setSectionPosition = _this$props.setSectionPosition;\n      var position = ReactDOM.findDOMNode(this).offsetTop;\n      setSectionPosition(name.split('%')[0], position);\n    }\n  }, {\n    key: \"processItem\",\n    value: function processItem(item, index) {\n      var _this$props2 = this.props,\n          tagsInUse = _this$props2.tagsInUse,\n          routeToItemDetail = _this$props2.routeToItemDetail,\n          lang = _this$props2.lang;\n      var tags = item.fields['Tags Filtering'];\n\n      if (tags) {\n        tags.forEach(function (tag, index) {\n          if (tag === 'vegetarian') {\n            tags[index] = 'V';\n          }\n\n          if (tag === 'vegan') {\n            tags[index] = 'VE';\n          }\n\n          if (tag === 'gluten-free') {\n            tags[index] = 'GF';\n          }\n        });\n      } // If menu item tags match any tags in filter -> should match ALL filter tags -> done\n      // changed .some method to .every\n\n\n      if (tags) {\n        if (tagsInUse.length > 0 && tagsInUse.every(function (tag) {\n          return tags.includes(tag);\n        }) || tagsInUse.length === 0) {\n          return React.createElement(MenuItem, {\n            key: item.id,\n            item: item.fields,\n            itemIndex: index,\n            lang: lang,\n            onClick: function onClick(e) {\n              routeToItemDetail(e, item.id, lang);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 44\n            },\n            __self: this\n          });\n        }\n      }\n\n      return '';\n    }\n  }, {\n    key: \"getList\",\n    value: function getList(item, index) {\n      var routeToItemDetail = this.props.routeToItemDetail;\n      return React.createElement(MenuList, {\n        key: item.id // disable menu list item click until ordering\n        ,\n        onClick: function onClick(e) {\n          routeToItemDetail(e, item.id);\n        },\n        item: item.fields,\n        itemIndex: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      });\n    }\n  }, {\n    key: \"getSection\",\n    value: function getSection() {\n      var _this = this;\n\n      var _this$props3 = this.props,\n          menuSection = _this$props3.menuSection,\n          lang = _this$props3.lang,\n          routeToItemDetail = _this$props3.routeToItemDetail,\n          tagsInUse = _this$props3.tagsInUse;\n      var infoList = []; // let updatedIndex = -1;\n\n      var section = menuSection.map(function (item, index) {\n        var hasTag = item.fields.Tags ? true : false;\n        var tags = item.fields.Tags;\n        var menuItemTemplate = React.createElement(MenuItem, {\n          key: item.id,\n          item: item.fields,\n          itemIndex: index,\n          lang: lang,\n          onClick: function onClick(e) {\n            routeToItemDetail(e, item.id, lang);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          },\n          __self: this\n        });\n\n        if (item.fields.itemType === 'info') {\n          infoList.push(item.fields); // eslint-disable-next-line\n\n          return;\n        }\n\n        if (tagsInUse.length > 0 && !hasTag) {\n          return '';\n        }\n\n        return hasTag ? tags[0] !== 'LIST' ? _this.processItem(item, index) : _this.getList(item, index) : menuItemTemplate;\n      });\n\n      if (tagsInUse.length === 0 && infoList.length > 0) {\n        section.push(React.createElement(MenuInfo, {\n          key: uuid(),\n          infoList: infoList,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        }));\n      } // old alternating code - delete when fixed\n      // section = section.map(item => {\n      //   if (item && item !== '' && item.type.name === 'MenuItem') {\n      //     // console.log(updatedIndex);\n      //     updatedIndex++\n      //     return (\n      //       <MenuItem\n      //         key={item.key}\n      //         item={item.props.item}\n      //         itemIndex={updatedIndex}\n      //         lang={lang}\n      //         onClick={(e) => {routeToItemDetail(e, item.key, lang)}}\n      //       />\n      //     )\n      //   } else {\n      //     return item\n      //   }\n      // })\n\n\n      return section;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props4 = this.props,\n          name = _this$props4.name,\n          index = _this$props4.index,\n          tagsInUse = _this$props4.tagsInUse;\n      var subSection = \"\";\n\n      if (name.indexOf(\"%\") !== -1) {\n        subSection = name.substring(name.indexOf('%') + 1, name.length);\n        name = name.substring(0, name.indexOf('%'));\n      } // replace name with tags in use\n\n\n      if (tagsInUse.length > 0) {\n        tagsInUse = tagsInUse.join(', ');\n        name = tagsInUse.replace(new RegExp(\"\\\\bV\\\\b\"), 'Vegetarian').replace(new RegExp(\"\\\\bVE\\\\b\"), 'Vegan').replace(new RegExp(\"\\\\bGF\\\\b\"), 'Gluten Free');\n        subSection = '';\n      }\n\n      ;\n      var section = this.getSection();\n      section = section.filter(function (elem) {\n        return elem;\n      });\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, tagsInUse.length > 0 && index > 0 ? '' : React.createElement(\"h2\", {\n        className: \"section \".concat(index === 0 && tagsInUse.length === 0 ? 'sectionTaller' : ''),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, name, React.createElement(\"span\", {\n        className: \"subSection\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, subSection)), section);\n    }\n  }]);\n\n  return Section;\n}(React.Component);\n\nexport default Section;","map":{"version":3,"sources":["/Users/michaelfoster/Git/mryum-avc/src/components/Menu/Section.js"],"names":["React","ReactDOM","MenuItem","MenuList","MenuInfo","uuid","Section","props","name","setSectionPosition","position","findDOMNode","offsetTop","split","item","index","tagsInUse","routeToItemDetail","lang","tags","fields","forEach","tag","length","every","includes","id","e","menuSection","infoList","section","map","hasTag","Tags","menuItemTemplate","itemType","push","processItem","getList","subSection","indexOf","substring","join","replace","RegExp","getSection","filter","elem","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport ReactDOM from 'react-dom';\nimport MenuItem from './MenuItem';\nimport MenuList from './MenuList';\nimport MenuInfo from './MenuInfo';\nimport uuid from 'uuid/v4';\n\nclass Section extends React.Component {\n\n  componentDidMount(){\n    const { name, setSectionPosition } = this.props;\n    const position = ReactDOM\n      .findDOMNode(this).offsetTop;\n    setSectionPosition(name.split('%')[0], position);\n  }\n\n  processItem(item, index){\n    const {\n      tagsInUse,\n      routeToItemDetail,\n      lang,\n    } = this.props;\n    let tags = item.fields['Tags Filtering']\n    if (tags) {\n      tags.forEach((tag, index) => {\n        if (tag === 'vegetarian') {\n          tags[index] = 'V'\n        }\n        if (tag === 'vegan') {\n          tags[index] = 'VE'\n        }\n        if (tag === 'gluten-free') {\n          tags[index] = 'GF'\n        }\n      })\n    }\n\n    // If menu item tags match any tags in filter -> should match ALL filter tags -> done\n    // changed .some method to .every\n    if (tags) {\n      if ((tagsInUse.length > 0 && tagsInUse.every(tag => tags.includes(tag)))\n        || tagsInUse.length === 0) {\n          return (\n            <MenuItem\n              key={item.id}\n              item={item.fields}\n              itemIndex={index}\n              lang={lang}\n              onClick={(e) => {routeToItemDetail(e, item.id, lang)}}\n            />\n          );\n        }\n    }\n\n    return '';\n  }\n\n  getList(item, index){\n    const { routeToItemDetail } = this.props;\n    return (\n      <MenuList\n        key={item.id}\n        // disable menu list item click until ordering\n        onClick={(e) => {routeToItemDetail(e, item.id)}}\n        item={item.fields}\n        itemIndex={index}\n      />\n    );\n  }\n\n  getSection(){\n    const {\n      menuSection,\n      lang,\n      routeToItemDetail,\n      tagsInUse,\n    } = this.props;\n\n    let infoList = [];\n    // let updatedIndex = -1;\n\n    let section = menuSection.map((item, index) => {\n      const hasTag = item.fields.Tags ? true : false;\n      const tags = item.fields.Tags;\n      const menuItemTemplate = (\n        <MenuItem\n          key={item.id}\n          item={item.fields}\n          itemIndex={index}\n          lang={lang}\n          onClick={(e) => {routeToItemDetail(e, item.id, lang)}}\n        />\n      );\n\n      if (item.fields.itemType === 'info') {\n        infoList.push(item.fields)\n        // eslint-disable-next-line\n        return\n      }\n\n      if (tagsInUse.length > 0 && !hasTag) {\n        return ''\n      }\n\n      return hasTag ? tags[0] !== 'LIST' ? this.processItem(item, index) : this.getList(item, index) : menuItemTemplate\n    });\n\n    if (tagsInUse.length === 0 && infoList.length > 0) {\n      section.push(<MenuInfo key={uuid()} infoList={infoList} />)\n    }\n\n    // old alternating code - delete when fixed\n    // section = section.map(item => {\n    //   if (item && item !== '' && item.type.name === 'MenuItem') {\n    //     // console.log(updatedIndex);\n    //     updatedIndex++\n    //     return (\n    //       <MenuItem\n    //         key={item.key}\n    //         item={item.props.item}\n    //         itemIndex={updatedIndex}\n    //         lang={lang}\n    //         onClick={(e) => {routeToItemDetail(e, item.key, lang)}}\n    //       />\n    //     )\n    //   } else {\n    //     return item\n    //   }\n    // })\n\n    return section\n  }\n\n  render() {\n    let { name, index, tagsInUse } = this.props\n    let subSection = \"\"\n    if (name.indexOf(\"%\") !== -1) {\n      subSection = name.substring((name.indexOf('%') + 1), name.length)\n      name = name.substring(0, name.indexOf('%'))\n    }\n\n    // replace name with tags in use\n    if (tagsInUse.length > 0) {\n      tagsInUse = tagsInUse.join(', ')\n      name = tagsInUse\n              .replace(new RegExp(\"\\\\bV\\\\b\"), 'Vegetarian')\n              .replace(new RegExp(\"\\\\bVE\\\\b\"), 'Vegan')\n              .replace(new RegExp(\"\\\\bGF\\\\b\"), 'Gluten Free')\n      subSection = ''\n    };\n\n    let section = this.getSection()\n    section = section.filter(elem => elem)\n\n    return (\n      <div>\n        {tagsInUse.length > 0 && index > 0 ? '' :\n          <h2 className={`section ${ index === 0 && tagsInUse.length === 0 ? 'sectionTaller' : '' }` } >{ name }<span className=\"subSection\">{ subSection }</span></h2>\n        }\n        { section }\n      </div>\n    )\n  }\n}\n\nexport default Section\n"]},"metadata":{},"sourceType":"module"}