{"ast":null,"code":"import _classCallCheck from \"/Users/michaelfoster/Git/mryum/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/michaelfoster/Git/mryum/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/michaelfoster/Git/mryum/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/michaelfoster/Git/mryum/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/michaelfoster/Git/mryum/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/michaelfoster/Git/mryum/src/components/Menu/Menu.js\";\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport React, { Component } from 'react';\nimport * as actions from './actions/actions.js';\nimport LoadingScreen from '../LoadingScreen/LoadingScreen.js';\nimport NotFound from '../NotFound/NotFound.js';\nimport Section from './Section.js';\nimport Water from './Water.js';\nimport MenuItem from './MenuItem.js';\nimport MenuList from './MenuList.js';\nimport Footer from './Footer.js';\nimport ItemDetail from './ItemDetail.js';\nimport { persistStore } from 'redux-persist';\n\nvar Menu =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Menu, _Component);\n\n  function Menu(props) {\n    _classCallCheck(this, Menu);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Menu).call(this, props));\n  }\n\n  _createClass(Menu, [{\n    key: \"getTags\",\n    value: function getTags() {\n      var filter = this.props.filter;\n      var tagsInUse = [];\n      Object.keys(filter).forEach(function (tag) {\n        if (filter[tag]) {\n          tagsInUse.push(tag);\n        }\n      });\n      return tagsInUse;\n    }\n  }, {\n    key: \"getSections\",\n    value: function getSections() {\n      var _this$props = this.props,\n          menuItems = _this$props.menuItems,\n          menuItemKeys = _this$props.menuItemKeys;\n      var tagsInUse = this.getTags();\n      var menuSections = {};\n      menuItemKeys.forEach(function (item) {\n        var placedSections = Object.keys(menuSections);\n        var menuItem = menuItems[item];\n        var section = menuItem.fields.Sections;\n\n        if (!placedSections.includes(section)) {\n          menuSections[section] = [menuItem];\n        } else {\n          menuSections[section] = menuSections[section].concat([menuItem]);\n        }\n      });\n    }\n  }, {\n    key: \"getMenu\",\n    value: function getMenu() {\n      var _this$props2 = this.props,\n          filter = _this$props2.filter,\n          setSectionPosition = _this$props2.setSectionPosition,\n          lang = _this$props2.lang,\n          routeToItemDetail = _this$props2.routeToItemDetail;\n      var menuSections = this.getSections();\n      var tagsInUse = this.getTags();\n\n      if (menuSections.length === 0) {\n        return React.createElement(NotFound, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        });\n      } else {\n        var sections = [];\n        Object.keys(menuSections).forEach(function (section, index) {\n          sections.push(React.createElement(Section, {\n            index: index,\n            menuSection: menuSections[section],\n            name: section,\n            setSectionPosition: setSectionPosition,\n            tagsInUse: tagsInUse,\n            routeToItemDetail: routeToItemDetail,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 65\n            },\n            __self: this\n          }));\n        });\n        return sections;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props3 = this.props,\n          bffRes = _this$props3.bffRes,\n          filter = _this$props3.filter,\n          lang = _this$props3.lang,\n          updateFilter = _this$props3.updateFilter,\n          updateLang = _this$props3.updateLang,\n          sectionPositions = _this$props3.sectionPositions,\n          itemId = _this$props3.itemId;\n      var venueName = Object.values(bffRes)[0].fields.Venue;\n\n      var _this$printMenu = this.printMenu(bffRes, filter),\n          menu = _this$printMenu.menu,\n          sectionNames = _this$printMenu.sectionNames;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, itemId ? React.createElement(ItemDetail, {\n        details: bffRes[itemId].fields,\n        lang: lang,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }) : this.getMenu());\n    }\n  }]);\n\n  return Menu;\n}(Component);\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return bindActionCreators(actions, dispatch);\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    bffRes: state.persistentMenu.bffRes,\n    isLoading: state.persistentMenu.isLoading,\n    venue: state.persistentMenu.venue,\n    sectionPositions: state.menu.sectionPositions,\n    filter: state.persistentMenu.filter,\n    lang: state.persistentMenu.lang\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Menu);","map":{"version":3,"sources":["/Users/michaelfoster/Git/mryum/src/components/Menu/Menu.js"],"names":["connect","bindActionCreators","React","Component","actions","LoadingScreen","NotFound","Section","Water","MenuItem","MenuList","Footer","ItemDetail","persistStore","Menu","props","filter","tagsInUse","Object","keys","forEach","tag","push","menuItems","menuItemKeys","getTags","menuSections","item","placedSections","menuItem","section","fields","Sections","includes","concat","setSectionPosition","lang","routeToItemDetail","getSections","length","sections","index","bffRes","updateFilter","updateLang","sectionPositions","itemId","venueName","values","Venue","printMenu","menu","sectionNames","getMenu","mapDispatchToProps","dispatch","mapStateToProps","state","persistentMenu","isLoading","venue"],"mappings":"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","sourcesContent":["import {connect} from 'react-redux'\nimport {bindActionCreators} from 'redux'\nimport React, {Component} from 'react';\nimport * as actions from './actions/actions.js'\nimport LoadingScreen from '../LoadingScreen/LoadingScreen.js'\nimport NotFound from '../NotFound/NotFound.js'\nimport Section from './Section.js'\nimport Water from './Water.js'\nimport MenuItem from './MenuItem.js'\nimport MenuList from './MenuList.js'\nimport Footer from './Footer.js'\nimport ItemDetail from './ItemDetail.js'\nimport { persistStore } from 'redux-persist'\n\nclass Menu extends Component {\n  constructor(props) {\n     super(props)\n   }\n\n  getTags(){\n    const { filter } = this.props;\n    const tagsInUse = [];\n    Object.keys(filter).forEach(tag => {\n      if (filter[tag]) {\n        tagsInUse.push(tag);\n      }\n    });\n\n    return tagsInUse;\n  }\n\n  getSections(){\n    const { menuItems, menuItemKeys } = this.props;\n    const tagsInUse = this.getTags();\n    const menuSections = {};\n    menuItemKeys.forEach(item => {\n      const placedSections = Object.keys(menuSections);\n      const menuItem = menuItems[item];\n      const section = menuItem.fields.Sections;\n      if (!placedSections.includes(section)){\n        menuSections[section] = [menuItem];\n      }\n      else{\n        menuSections[section] = menuSections[section].concat([menuItem]);\n      }\n    });\n  }\n\n  getMenu() {\n    const {\n      filter,\n      setSectionPosition,\n      lang,\n      routeToItemDetail,\n    } = this.props\n    const menuSections = this.getSections();\n    const tagsInUse = this.getTags();\n\n    if (menuSections.length === 0) {\n      return <NotFound/>;\n    } else {\n      let sections = []\n      Object.keys(menuSections).forEach((section,index) => {\n          sections.push(\n            <Section\n              index={index}\n              menuSection={menuSections[section]}\n              name={section}\n              setSectionPosition={setSectionPosition}\n              tagsInUse={tagsInUse}\n              routeToItemDetail={routeToItemDetail}\n            />\n          )\n        });\n      return sections;\n    }\n  }\n\n  render() {\n    const {\n      bffRes,\n      filter,\n      lang,\n      updateFilter,\n      updateLang,\n      sectionPositions,\n      itemId,\n    } = this.props\n\n    const venueName = Object.values(bffRes)[0].fields.Venue\n    const { menu, sectionNames } = this.printMenu(bffRes, filter);\n\n\n    return (\n      <div>\n        {\n          itemId\n            ? <ItemDetail details={bffRes[itemId].fields} lang={lang} />\n            : this.getMenu()\n        }\n      </div>\n    );\n  }\n}\n\nconst mapDispatchToProps = dispatch => bindActionCreators(actions, dispatch)\n\nconst mapStateToProps = state => ({\n  bffRes: state.persistentMenu.bffRes,\n  isLoading: state.persistentMenu.isLoading,\n  venue: state.persistentMenu.venue,\n  sectionPositions: state.menu.sectionPositions,\n  filter: state.persistentMenu.filter,\n  lang: state.persistentMenu.lang,\n});\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Menu);\n"]},"metadata":{},"sourceType":"module"}