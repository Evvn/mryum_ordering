{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\Documents\\\\GitHub\\\\mryum-avc\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _slicedToArray from \"D:\\\\Documents\\\\GitHub\\\\mryum-avc\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _asyncToGenerator from \"D:\\\\Documents\\\\GitHub\\\\mryum-avc\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"D:\\\\Documents\\\\GitHub\\\\mryum-avc\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\Documents\\\\GitHub\\\\mryum-avc\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\Documents\\\\GitHub\\\\mryum-avc\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\Documents\\\\GitHub\\\\mryum-avc\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\Documents\\\\GitHub\\\\mryum-avc\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\Documents\\\\GitHub\\\\mryum-avc\\\\src\\\\components\\\\Common\\\\MenuSearch.js\";\nimport React from 'react';\nimport { tmpdir } from 'os';\nimport { promises } from 'fs';\n\nvar MenuSearch =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(MenuSearch, _React$Component);\n\n  function MenuSearch(props) {\n    var _this;\n\n    _classCallCheck(this, MenuSearch);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MenuSearch).call(this, props));\n\n    _this.search =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(input) {\n        var data, _dataKeys, expression, big_bucket, sectionsPromise, pricePromise, itemNamePromise, itemDescriptionPromise, _ref2, _ref3, sections, price, itemName, itemDesc;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                data = _this.props.data;\n                _dataKeys = Object.keys(data);\n                console.log(data);\n\n                if (!input) {\n                  _context.next = 18;\n                  break;\n                }\n\n                expression = new RegExp(\"\".concat(input), 'gi');\n                big_bucket = []; // refactor to run async\n\n                sectionsPromise = new Promise(function (resolve) {\n                  var bucket = [];\n\n                  for (var _i = 0, _dataKeys2 = _dataKeys; _i < _dataKeys2.length; _i++) {\n                    var key = _dataKeys2[_i];\n                    var fields = data[key].fields;\n                    console.log(fields[\"Item Description\"]);\n\n                    if (expression.test(fields['Sections'])) {\n                      var _fields = data[key].fields;\n\n                      var searchScore = _this.score(_fields['Sections'], expression);\n\n                      bucket.push({\n                        result: _fields['Sections'],\n                        score: searchScore\n                      });\n                    }\n                  } //console.log(bucket)\n\n\n                  resolve(bucket);\n                });\n                pricePromise = new Promise(function (resolve) {\n                  var bucket = [];\n\n                  for (var _i2 = 0, _dataKeys3 = _dataKeys; _i2 < _dataKeys3.length; _i2++) {\n                    var key = _dataKeys3[_i2];\n                    var fields = data[key].fields;\n                    console.log(fields[\"Item Description\"]);\n\n                    if (expression.test(fields['Price'])) {\n                      var _fields2 = data[key].fields;\n\n                      var searchScore = _this.score(_fields2['Price'], expression);\n\n                      bucket.push({\n                        result: _fields2['Price'],\n                        score: searchScore\n                      });\n                    }\n                  }\n\n                  resolve(bucket);\n                });\n                itemNamePromise = new Promise(function (resolve) {\n                  var bucket = [];\n\n                  for (var _i3 = 0, _dataKeys4 = _dataKeys; _i3 < _dataKeys4.length; _i3++) {\n                    var key = _dataKeys4[_i3];\n                    var fields = data[key].fields;\n                    console.log(fields[\"Item Description\"]);\n\n                    if (expression.test(fields['Item Name'])) {\n                      var _fields3 = data[key].fields;\n\n                      var searchScore = _this.score(_fields3['Item Name'], expression);\n\n                      bucket.push({\n                        result: _fields3['Item Name'],\n                        score: searchScore\n                      });\n                    }\n                  }\n\n                  resolve(bucket);\n                });\n                itemDescriptionPromise = new Promise(function (resolve) {\n                  var bucket = [];\n\n                  for (var _i4 = 0, _dataKeys5 = _dataKeys; _i4 < _dataKeys5.length; _i4++) {\n                    var key = _dataKeys5[_i4];\n                    var fields = data[key].fields;\n                    console.log(fields[\"Item Description\"]);\n\n                    if (expression.test(fields['Item Description'])) {\n                      var _fields4 = data[key].fields;\n\n                      var searchScore = _this.score(_fields4['Item Description'], expression);\n\n                      bucket.push({\n                        result: _fields4['Item Description'],\n                        score: searchScore\n                      });\n                    }\n                  }\n\n                  resolve(bucket);\n                });\n                _context.next = 12;\n                return Promise.all([sectionsPromise, pricePromise, itemNamePromise, itemDescriptionPromise]);\n\n              case 12:\n                _ref2 = _context.sent;\n                _ref3 = _slicedToArray(_ref2, 4);\n                sections = _ref3[0];\n                price = _ref3[1];\n                itemName = _ref3[2];\n                itemDesc = _ref3[3];\n\n              case 18:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.score = function (entry, regex) {\n      var matched = entry.match(regex);\n\n      if (matched) {\n        var result = matched.length / entry.length;\n        return result.toFixed(3);\n      }\n    };\n\n    _this.result = [];\n    return _this;\n  } // Sections: Drinks, Price: 4, Item Name: Coffee | Tea | Etc, Item Description: Batch Brew Filter \n\n\n  _createClass(MenuSearch, [{\n    key: \"render\",\n    value: function render() {\n      var data = this.props.data;\n      console.log(this.search('tea'));\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, 'hello');\n    }\n  }]);\n\n  return MenuSearch;\n}(React.Component);\n\nexport default MenuSearch;","map":{"version":3,"sources":["D:\\Documents\\GitHub\\mryum-avc\\src\\components\\Common\\MenuSearch.js"],"names":["React","tmpdir","promises","MenuSearch","props","search","input","data","_dataKeys","Object","keys","console","log","expression","RegExp","big_bucket","sectionsPromise","Promise","resolve","bucket","key","fields","test","searchScore","score","push","result","pricePromise","itemNamePromise","itemDescriptionPromise","all","sections","price","itemName","itemDesc","entry","regex","matched","match","length","toFixed","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { tmpdir } from 'os';\r\nimport { promises } from 'fs';\r\n\r\nclass MenuSearch extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.result = [];\r\n    }\r\n\r\n    // Sections: Drinks, Price: 4, Item Name: Coffee | Tea | Etc, Item Description: Batch Brew Filter \r\n    search = async input => {\r\n        const {data} = this.props;\r\n        const _dataKeys = Object.keys(data);\r\n        console.log(data)\r\n        if (input) {\r\n            let expression = new RegExp(`${input}`, 'gi');\r\n            \r\n            let big_bucket = [];\r\n            \r\n            // refactor to run async\r\n            let sectionsPromise = new Promise(resolve => {\r\n                let bucket = [];\r\n                for (const key of _dataKeys) {\r\n                    let fields = data[key].fields;\r\n                    console.log(fields[\"Item Description\"])\r\n\r\n                    if (expression.test(fields['Sections'])) {\r\n                        let fields = data[key].fields;\r\n                        let searchScore = this.score(fields['Sections'], expression);\r\n                        bucket.push({result: fields['Sections'], score: searchScore});\r\n                    }\r\n                }\r\n                //console.log(bucket)\r\n                resolve(bucket);\r\n            });\r\n\r\n            let pricePromise = new Promise(resolve => {\r\n                let bucket = [];\r\n                for (const key of _dataKeys) {\r\n                    let fields = data[key].fields;\r\n                    console.log(fields[\"Item Description\"])\r\n                    \r\n                    if (expression.test(fields['Price'])) {\r\n                        let fields = data[key].fields;\r\n                        let searchScore = this.score(fields['Price'], expression);\r\n                        bucket.push({result: fields['Price'], score: searchScore});\r\n                    }\r\n                }\r\n                resolve(bucket);\r\n            });\r\n\r\n            let itemNamePromise = new Promise(resolve => {\r\n                let bucket = [];\r\n                for (const key of _dataKeys) {\r\n                    let fields = data[key].fields;\r\n                    console.log(fields[\"Item Description\"])\r\n                \r\n                    if (expression.test(fields['Item Name'])) {\r\n                        let fields = data[key].fields;\r\n                        let searchScore = this.score(fields['Item Name'], expression);\r\n                        bucket.push({result: fields['Item Name'], score: searchScore});\r\n                    }\r\n                }\r\n                resolve(bucket);\r\n            });\r\n\r\n            let itemDescriptionPromise = new Promise(resolve => {\r\n                let bucket = [];\r\n                for (const key of _dataKeys) {\r\n                    let fields = data[key].fields;\r\n                    console.log(fields[\"Item Description\"])\r\n                \r\n                    if (expression.test(fields['Item Description'])) {\r\n                        let fields = data[key].fields;\r\n                        let searchScore = this.score(fields['Item Description'], expression);\r\n                        bucket.push({result: fields['Item Description'], score: searchScore});\r\n                    }\r\n                }\r\n                resolve(bucket);\r\n            });\r\n            \r\n            \r\n\r\n            const [sections, price, itemName, itemDesc] = await Promise.all([sectionsPromise, pricePromise, itemNamePromise, itemDescriptionPromise]);\r\n\r\n            \r\n        \r\n            // expression.sort((a,b) => (a.score < b.score) ? 1 : ((b.score < a.score) ? -1 : 0));\r\n            // let actionables = [];\r\n            // bucket.map(x => actionables.push(x.result));\r\n            // this.result = actionables;\r\n            //console.log(sections);\r\n\r\n        }\r\n    }\r\n\r\n    score = (entry, regex) => {\r\n        let matched = entry.match(regex);\r\n        if (matched) {\r\n            let result = matched.length / entry.length;\r\n            return result.toFixed(3);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {data} = this.props;\r\n        console.log(this.search('tea'))\r\n        return ( \r\n            <div> \r\n                { 'hello' } \r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default MenuSearch;"]},"metadata":{},"sourceType":"module"}