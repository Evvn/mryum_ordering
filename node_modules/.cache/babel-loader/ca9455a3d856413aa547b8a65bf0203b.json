{"ast":null,"code":"import _classCallCheck from \"D:\\\\Documents\\\\GitHub\\\\mryum-avc\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\Documents\\\\GitHub\\\\mryum-avc\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\Documents\\\\GitHub\\\\mryum-avc\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\Documents\\\\GitHub\\\\mryum-avc\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\Documents\\\\GitHub\\\\mryum-avc\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"D:\\\\Documents\\\\GitHub\\\\mryum-avc\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"D:\\\\Documents\\\\GitHub\\\\mryum-avc\\\\src\\\\components\\\\Menu\\\\MenuContainer.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport HorizontalScrollNav from '../Common/HorizontalScrollNav';\nimport Filter from './Filter.js';\nimport LanguageSelect from './LanguageSelect.js';\nimport Menu from './Menu'; // import { persistStore } from 'redux-persist'\n\nimport Footer from './Footer';\nimport Water from './Water';\nimport MenuSearch from '../Common/MenuSearch';\nimport LoadingScreen from '../LoadingScreen/LoadingScreen';\nimport * as actions from './actions/actions.js';\nimport classNames from 'classnames';\n\nvar MenuContainer =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(MenuContainer, _React$Component);\n\n  function MenuContainer(props) {\n    var _this;\n\n    _classCallCheck(this, MenuContainer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MenuContainer).call(this, props));\n    var paramArray = window.location.href.split('/');\n    _this.params = {\n      requestedVenue: paramArray[3],\n      item: paramArray.length === 5 ? paramArray[4] : false\n    };\n    _this.routeToItemDetail = _this.routeToItemDetail.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(MenuContainer, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this$props = this.props,\n          getMenuData = _this$props.getMenuData,\n          bffRes = _this$props.bffRes,\n          venue = _this$props.venue,\n          itemId = _this$props.itemId,\n          setItemId = _this$props.setItemId,\n          clearSectionPositions = _this$props.clearSectionPositions;\n\n      if (!bffRes || this.params.requestedVenue !== venue) {\n        document.title = \"Mr Yum\";\n        getMenuData(this.params.requestedVenue, this.params.item);\n        clearSectionPositions();\n      } else {\n        var venueName = Object.values(bffRes)[0].fields.Venue;\n        document.title = venueName + \" Menu\";\n      }\n\n      if (this.params.item !== itemId) {\n        setItemId(this.params.item);\n      }\n    }\n  }, {\n    key: \"componentWillUpdate\",\n    value: function componentWillUpdate() {\n      var _this$props2 = this.props,\n          getMenuData = _this$props2.getMenuData,\n          bffRes = _this$props2.bffRes,\n          venue = _this$props2.venue,\n          itemId = _this$props2.itemId,\n          setItemId = _this$props2.setItemId,\n          clearSectionPositions = _this$props2.clearSectionPositions;\n\n      if (!bffRes || this.params.requestedVenue !== venue) {\n        getMenuData(this.params.requestedVenue, this.params.item);\n        clearSectionPositions();\n      }\n\n      if (this.params.item !== itemId) {\n        setItemId(this.params.item);\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var index = 0;\n      document.querySelectorAll('.menuItem').forEach(function (item) {\n        if (item.classList.contains('water')) {\n          return;\n        }\n\n        if (index % 2 === 0) {\n          if (!item.querySelector('.leftBox').classList.contains('itemPhoto')) {\n            console.log('item photo on right, swap sides');\n            item.querySelector('.leftBox').className = 'rightBox';\n            item.querySelector('.rightBox').className = 'leftBox';\n          }\n        } else {\n          if (!item.querySelector('.rightBox').classList.contains('itemPhoto')) {\n            console.log('item photo on left, swap sides');\n            item.querySelector('.leftBox').className = 'rightBox';\n            item.querySelector('.rightBox').className = 'leftBox';\n          }\n        }\n\n        index++;\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var clearSectionPositions = this.props.clearSectionPositions;\n      clearSectionPositions();\n      window.scrollTo(0, 0); //persistStore(this.props).purge();\n    }\n  }, {\n    key: \"routeToItemDetail\",\n    value: function routeToItemDetail(e, id, lang) {\n      //const { setItemId } = this.props;\n      var newId = id ? id : false;\n      var refSuffix = newId ? \"/\".concat(id) : '';\n      window.location = window.location.href + \"\".concat(refSuffix);\n    }\n  }, {\n    key: \"getHeader\",\n    value: function getHeader() {\n      var _this$props3 = this.props,\n          sectionPositions = _this$props3.sectionPositions,\n          filter = _this$props3.filter,\n          updateFilter = _this$props3.updateFilter,\n          updateLang = _this$props3.updateLang,\n          lang = _this$props3.lang,\n          bffRes = _this$props3.bffRes,\n          itemId = _this$props3.itemId;\n      var venueName = bffRes ? Object.values(bffRes)[0].fields.Venue : false;\n      var itemView = itemId ? true : false;\n      var filtersInUse = Object.values(filter).includes(true);\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(\"header\", {\n        className: classNames('header', itemView ? 'previewHeader' : ''),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, itemView ? React.createElement(\"img\", {\n        onClick: function onClick() {\n          window.history.back();\n        },\n        src: \"/icons/arrow-left-solid-grey.svg\",\n        className: \"headerBackArrow\",\n        alt: \"back arrow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }) : null, !!venueName && !itemView ? React.createElement(\"h1\", {\n        className: \"venue\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, venueName) : null, !itemView && React.createElement(Filter, {\n        filter: filter,\n        updateFilter: updateFilter,\n        lang: lang,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }), !itemView && !filtersInUse ? React.createElement(HorizontalScrollNav, {\n        sectionPositions: sectionPositions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }) : '', !itemView && React.createElement(LanguageSelect, {\n        lang: lang,\n        updateLang: updateLang,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }), React.createElement(MenuSearch, {\n        data: this.props.bffRes,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      })));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      // eslint-disable-next-line\n      var _this$props4 = this.props,\n          venueName = _this$props4.venueName,\n          filter = _this$props4.filter,\n          lang = _this$props4.lang,\n          bffRes = _this$props4.bffRes,\n          isLoading = _this$props4.isLoading,\n          setSectionPosition = _this$props4.setSectionPosition,\n          itemId = _this$props4.itemId;\n      return isLoading || !bffRes ? React.createElement(LoadingScreen, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }) : React.createElement(\"div\", {\n        className: \"Menu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, this.getHeader(), React.createElement(\"div\", {\n        className: \"menu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(Menu, {\n        menuItemKeys: Object.keys(bffRes),\n        menuItems: bffRes,\n        filter: filter,\n        lang: lang,\n        itemId: itemId,\n        routeToItemDetail: this.routeToItemDetail,\n        setSectionPosition: setSectionPosition,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }), React.createElement(Water, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }), React.createElement(Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return MenuContainer;\n}(React.Component);\n\n;\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return bindActionCreators(actions, dispatch);\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    bffRes: state.persistentMenu.bffRes,\n    isLoading: state.common.isLoading,\n    venue: state.persistentMenu.venue,\n    itemId: state.persistentMenu.item,\n    sectionPositions: state.menu.sectionPositions,\n    filter: state.persistentMenu.filter,\n    lang: state.persistentMenu.lang\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MenuContainer);","map":{"version":3,"sources":["D:\\Documents\\GitHub\\mryum-avc\\src\\components\\Menu\\MenuContainer.js"],"names":["React","connect","bindActionCreators","HorizontalScrollNav","Filter","LanguageSelect","Menu","Footer","Water","MenuSearch","LoadingScreen","actions","classNames","MenuContainer","props","paramArray","window","location","href","split","params","requestedVenue","item","length","routeToItemDetail","bind","getMenuData","bffRes","venue","itemId","setItemId","clearSectionPositions","document","title","venueName","Object","values","fields","Venue","index","querySelectorAll","forEach","classList","contains","querySelector","console","log","className","scrollTo","e","id","lang","newId","refSuffix","sectionPositions","filter","updateFilter","updateLang","itemView","filtersInUse","includes","history","back","isLoading","setSectionPosition","getHeader","keys","Component","mapDispatchToProps","dispatch","mapStateToProps","state","persistentMenu","common","menu"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport {connect} from 'react-redux'\r\nimport {bindActionCreators} from 'redux'\r\nimport HorizontalScrollNav from '../Common/HorizontalScrollNav';\r\nimport Filter from './Filter.js';\r\nimport LanguageSelect from './LanguageSelect.js';\r\nimport Menu from './Menu';\r\n// import { persistStore } from 'redux-persist'\r\nimport Footer from './Footer';\r\nimport Water from './Water';\r\nimport MenuSearch from '../Common/MenuSearch';\r\nimport LoadingScreen from '../LoadingScreen/LoadingScreen';\r\nimport * as actions from './actions/actions.js';\r\nimport classNames from 'classnames'\r\n\r\nclass MenuContainer extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    const paramArray = window.location.href.split('/');\r\n    this.params = {\r\n       requestedVenue: paramArray[3],\r\n       item: paramArray.length === 5 ? paramArray[4] : false,\r\n    }\r\n\r\n    this.routeToItemDetail = this.routeToItemDetail.bind(this)\r\n  }\r\n\r\n componentWillMount() {\r\n   const { getMenuData, bffRes, venue, itemId, setItemId, clearSectionPositions } = this.props;\r\n   if (!bffRes || this.params.requestedVenue !== venue) {\r\n    document.title = \"Mr Yum\";\r\n     getMenuData(this.params.requestedVenue, this.params.item);\r\n     clearSectionPositions();\r\n   }\r\n   else{\r\n    const venueName = Object.values(bffRes)[0].fields.Venue;\r\n    document.title = venueName + \" Menu\";\r\n   }\r\n   if(this.params.item !== itemId){\r\n     setItemId(this.params.item)\r\n   }\r\n }\r\n\r\n componentWillUpdate() {\r\n   const { getMenuData, bffRes, venue, itemId, setItemId, clearSectionPositions } = this.props;\r\n   if (!bffRes || this.params.requestedVenue !== venue) {\r\n     getMenuData(this.params.requestedVenue, this.params.item);\r\n     clearSectionPositions();\r\n   }\r\n   if(this.params.item !== itemId){\r\n     setItemId(this.params.item)\r\n   }\r\n }\r\n\r\n componentDidUpdate() {\r\n   let index = 0\r\n   document.querySelectorAll('.menuItem').forEach(item => {\r\n     if (item.classList.contains('water')) {\r\n       return\r\n     }\r\n     if (index % 2 === 0) {\r\n       if (!item.querySelector('.leftBox').classList.contains('itemPhoto')) {\r\n         console.log('item photo on right, swap sides');\r\n         item.querySelector('.leftBox').className = 'rightBox'\r\n         item.querySelector('.rightBox').className = 'leftBox'\r\n       }\r\n     } else {\r\n       if (!item.querySelector('.rightBox').classList.contains('itemPhoto')) {\r\n         console.log('item photo on left, swap sides');\r\n         item.querySelector('.leftBox').className = 'rightBox'\r\n         item.querySelector('.rightBox').className = 'leftBox'\r\n       }\r\n     }\r\n     index++\r\n   })\r\n }\r\n\r\n componentWillUnmount() {\r\n   const { clearSectionPositions } = this.props;\r\n   clearSectionPositions();\r\n   window.scrollTo(0,0)\r\n   //persistStore(this.props).purge();\r\n }\r\n\r\n routeToItemDetail(e, id, lang) {\r\n   //const { setItemId } = this.props;\r\n   const newId = id ? id : false;\r\n   const refSuffix = newId ? `/${id}` : '';\r\n   window.location = window.location.href + `${refSuffix}`\r\n }\r\n\r\n\r\n  getHeader(){\r\n    const {\r\n      sectionPositions,\r\n      filter,\r\n      updateFilter,\r\n      updateLang,\r\n      lang,\r\n      bffRes,\r\n      itemId,\r\n    } = this.props;\r\n    const venueName = bffRes ? Object.values(bffRes)[0].fields.Venue : false;\r\n    const itemView = itemId ? true : false;\r\n    const filtersInUse = Object.values(filter).includes(true)\r\n\r\n    return (\r\n      <div>\r\n        <header className={ classNames('header', itemView ? 'previewHeader' : '') }>\r\n          {/* back arrow for routing, control this and venuename via props */}\r\n          { itemView ? <img onClick={() => {window.history.back()}} src=\"/icons/arrow-left-solid-grey.svg\" className=\"headerBackArrow\" alt=\"back arrow\"/> : null }\r\n          { !!venueName && !itemView? <h1 className=\"venue\">{venueName}</h1> : null }\r\n          { !itemView && <Filter filter={filter} updateFilter={updateFilter} lang={lang} /> }\r\n          { !itemView && !filtersInUse ? <HorizontalScrollNav sectionPositions={sectionPositions}/> : ''}\r\n          { !itemView && <LanguageSelect lang={lang} updateLang={updateLang} /> }\r\n          {/* <img className=\"cartIcon\" src=\"/icons/cart_icon.svg\" alt=\"cart\"/> */}\r\n          {/* need check to see when to display cart badge */}\r\n          {/* { hasCartItems && <div className=\"cartBadge\"/> } */}\r\n          {<MenuSearch data={this.props.bffRes}/>}\r\n        </header>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    // eslint-disable-next-line\r\n    const {\r\n      venueName,\r\n      filter,\r\n      lang,\r\n      bffRes,\r\n      isLoading,\r\n      setSectionPosition,\r\n      itemId,\r\n    } = this.props;\r\n\r\n\r\n    return (\r\n      isLoading || !bffRes ? <LoadingScreen/> :\r\n      (\r\n        <div className=\"Menu\">\r\n          {this.getHeader()}\r\n          <div className=\"menu\">\r\n            <Menu\r\n              menuItemKeys={Object.keys(bffRes)}\r\n              menuItems={bffRes}\r\n              filter={filter}\r\n              lang={lang}\r\n              itemId={itemId}\r\n              routeToItemDetail={this.routeToItemDetail}\r\n              setSectionPosition={setSectionPosition}\r\n            />\r\n            <Water/>\r\n            <Footer/>\r\n          </div>\r\n        </div>\r\n      )\r\n    );\r\n  }\r\n\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => bindActionCreators(actions, dispatch)\r\n\r\nconst mapStateToProps = state => ({\r\n  bffRes: state.persistentMenu.bffRes,\r\n  isLoading: state.common.isLoading,\r\n  venue: state.persistentMenu.venue,\r\n  itemId: state.persistentMenu.item,\r\n  sectionPositions: state.menu.sectionPositions,\r\n  filter: state.persistentMenu.filter,\r\n  lang: state.persistentMenu.lang,\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MenuContainer)\r\n"]},"metadata":{},"sourceType":"module"}