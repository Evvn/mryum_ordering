{"ast":null,"code":"import _classCallCheck from \"/Users/michaelfoster/Git/mryum/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/michaelfoster/Git/mryum/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/michaelfoster/Git/mryum/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/michaelfoster/Git/mryum/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/michaelfoster/Git/mryum/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/michaelfoster/Git/mryum/src/components/Menu/Section.js\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport MenuItem from './MenuItem';\nimport MenuList from './MenuList';\nimport MenuInfo from './MenuInfo';\n\nvar Section =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Section, _React$Component);\n\n  function Section() {\n    _classCallCheck(this, Section);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Section).apply(this, arguments));\n  }\n\n  _createClass(Section, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props = this.props,\n          name = _this$props.name,\n          setSectionPosition = _this$props.setSectionPosition;\n      var position = ReactDOM.findDOMNode(this).offsetTop;\n      setSectionPosition(name.split('%')[0], position);\n    }\n  }, {\n    key: \"processItem\",\n    value: function processItem(item, index) {\n      var _this$props2 = this.props,\n          tagsInUse = _this$props2.tagsInUse,\n          routeToItemDetail = _this$props2.routeToItemDetail,\n          lang = _this$props2.lang;\n      var tags = item.fields.Tags; // If menu item tags match any tags in filter\n\n      if (tagsInUse.length > 0 && tagsInUse.some(function (tag) {\n        return tags.includes(tag);\n      }) || tagsInUse.length === 0) {\n        return React.createElement(MenuItem, {\n          key: item.id,\n          item: item.fields,\n          itemIndex: index,\n          lang: lang,\n          onClick: function onClick(e) {\n            routeToItemDetail(e, item.id, lang);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 30\n          },\n          __self: this\n        });\n      }\n\n      return '';\n    }\n  }, {\n    key: \"getList\",\n    value: function getList(item, index) {\n      var routeToItemDetail = this.props.routeToItemDetail;\n      return React.createElement(MenuList, {\n        key: item.id // disable menu list item click until ordering\n        ,\n        onClick: function onClick(e) {\n          routeToItemDetail(e, item.id);\n        },\n        item: item.fields,\n        itemIndex: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      });\n    }\n  }, {\n    key: \"getSection\",\n    value: function getSection() {\n      var _this = this;\n\n      var _this$props3 = this.props,\n          menuSection = _this$props3.menuSection,\n          lang = _this$props3.lang,\n          routeToItemDetail = _this$props3.routeToItemDetail,\n          tagsInUse = _this$props3.tagsInUse;\n      var infoList = [];\n      var updatedIndex = -1;\n      var section = menuSection.map(function (item, index) {\n        var hasTag = item.fields.Tags ? true : false;\n        var tags = item.fields.Tags;\n        var menuItemTemplate = React.createElement(MenuItem, {\n          key: item.id,\n          item: item.fields,\n          itemIndex: index,\n          lang: lang,\n          onClick: function onClick(e) {\n            routeToItemDetail(e, item.id, lang);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71\n          },\n          __self: this\n        });\n\n        if (item.fields.itemType === 'info') {\n          infoList.push(item.fields); // eslint-disable-next-line\n\n          return;\n        }\n\n        return hasTag ? tags[0] !== 'LIST' ? _this.processItem(item, index) : _this.getList(item, index) : menuItemTemplate;\n      });\n\n      if (tagsInUse.length === 0) {\n        // TODO: find a better unique key for this lol (lazy ass)\n        section.push(React.createElement(MenuInfo, {\n          key: Math.random(999),\n          infoList: infoList,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }));\n      }\n\n      section = section.map(function (item) {\n        if (item && item !== '' && item.type.name === 'MenuItem') {\n          updatedIndex++;\n          return React.createElement(MenuItem, {\n            key: item.key,\n            item: item.props.item,\n            itemIndex: updatedIndex,\n            lang: lang,\n            onClick: function onClick(e) {\n              routeToItemDetail(e, item.id, lang);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 98\n            },\n            __self: this\n          });\n        } else {\n          return item;\n        }\n      });\n      return section;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props4 = this.props,\n          name = _this$props4.name,\n          index = _this$props4.index,\n          tagsInUse = _this$props4.tagsInUse;\n      var subSection = \"\";\n\n      if (name.indexOf(\"%\") !== -1) {\n        subSection = name.substring(name.indexOf('%') + 1, name.length);\n        name = name.substring(0, name.indexOf('%'));\n      }\n\n      if (tagsInUse.length > 0) {\n        tagsInUse = tagsInUse.join(', ');\n        name = tagsInUse.replace(new RegExp(\"\\\\bV\\\\b\"), 'Vegetarian').replace(new RegExp(\"\\\\bVE\\\\b\"), 'Vegan').replace(new RegExp(\"\\\\bGF\\\\b\"), 'Gluten Free');\n      }\n\n      ;\n      var section = this.getSection();\n\n      if (section.slice(-1)[0] === undefined) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132\n          },\n          __self: this\n        });\n      } else {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          className: \"section \".concat(index === 0 ? 'sectionTaller' : ''),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        }, name, React.createElement(\"span\", {\n          className: \"subSection\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        }, subSection)), section);\n      }\n    }\n  }]);\n\n  return Section;\n}(React.Component);\n\nexport default Section;","map":{"version":3,"sources":["/Users/michaelfoster/Git/mryum/src/components/Menu/Section.js"],"names":["React","ReactDOM","MenuItem","MenuList","MenuInfo","Section","props","name","setSectionPosition","position","findDOMNode","offsetTop","split","item","index","tagsInUse","routeToItemDetail","lang","tags","fields","Tags","length","some","tag","includes","id","e","menuSection","infoList","updatedIndex","section","map","hasTag","menuItemTemplate","itemType","push","processItem","getList","Math","random","type","key","subSection","indexOf","substring","join","replace","RegExp","getSection","slice","undefined","Component"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAOC,QAAP,MAAqB,YAArB;;IAEMC,O;;;;;;;;;;;;;wCAEe;AAAA,wBACoB,KAAKC,KADzB;AAAA,UACTC,IADS,eACTA,IADS;AAAA,UACHC,kBADG,eACHA,kBADG;AAEjB,UAAMC,QAAQ,GAAGR,QAAQ,CACtBS,WADc,CACF,IADE,EACIC,SADrB;AAEAH,MAAAA,kBAAkB,CAACD,IAAI,CAACK,KAAL,CAAW,GAAX,EAAgB,CAAhB,CAAD,EAAqBH,QAArB,CAAlB;AACD;;;gCAIWI,I,EAAMC,K,EAAM;AAAA,yBAKlB,KAAKR,KALa;AAAA,UAEpBS,SAFoB,gBAEpBA,SAFoB;AAAA,UAGpBC,iBAHoB,gBAGpBA,iBAHoB;AAAA,UAIpBC,IAJoB,gBAIpBA,IAJoB;AAMtB,UAAMC,IAAI,GAAGL,IAAI,CAACM,MAAL,CAAYC,IAAzB,CANsB,CAQtB;;AACA,UAAKL,SAAS,CAACM,MAAV,GAAmB,CAAnB,IAAwBN,SAAS,CAACO,IAAV,CAAe,UAAAC,GAAG;AAAA,eAAIL,IAAI,CAACM,QAAL,CAAcD,GAAd,CAAJ;AAAA,OAAlB,CAAzB,IACCR,SAAS,CAACM,MAAV,KAAqB,CAD1B,EAC6B;AACzB,eACE,oBAAC,QAAD;AACE,UAAA,GAAG,EAAER,IAAI,CAACY,EADZ;AAEE,UAAA,IAAI,EAAEZ,IAAI,CAACM,MAFb;AAGE,UAAA,SAAS,EAAEL,KAHb;AAIE,UAAA,IAAI,EAAEG,IAJR;AAKE,UAAA,OAAO,EAAE,iBAACS,CAAD,EAAO;AAACV,YAAAA,iBAAiB,CAACU,CAAD,EAAIb,IAAI,CAACY,EAAT,EAAaR,IAAb,CAAjB;AAAoC,WALvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AASD;;AAEH,aAAO,EAAP;AACD;;;4BAEOJ,I,EAAMC,K,EAAM;AAAA,UACVE,iBADU,GACY,KAAKV,KADjB,CACVU,iBADU;AAElB,aACE,oBAAC,QAAD;AACE,QAAA,GAAG,EAAEH,IAAI,CAACY,EADZ,CAEE;AAFF;AAGE,QAAA,OAAO,EAAE,iBAACC,CAAD,EAAO;AAACV,UAAAA,iBAAiB,CAACU,CAAD,EAAIb,IAAI,CAACY,EAAT,CAAjB;AAA8B,SAHjD;AAIE,QAAA,IAAI,EAAEZ,IAAI,CAACM,MAJb;AAKE,QAAA,SAAS,EAAEL,KALb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF;AASD;;;iCAEW;AAAA;;AAAA,yBAMN,KAAKR,KANC;AAAA,UAERqB,WAFQ,gBAERA,WAFQ;AAAA,UAGRV,IAHQ,gBAGRA,IAHQ;AAAA,UAIRD,iBAJQ,gBAIRA,iBAJQ;AAAA,UAKRD,SALQ,gBAKRA,SALQ;AAQV,UAAIa,QAAQ,GAAG,EAAf;AACA,UAAIC,YAAY,GAAG,CAAC,CAApB;AAEA,UAAIC,OAAO,GAAGH,WAAW,CAACI,GAAZ,CAAgB,UAAClB,IAAD,EAAOC,KAAP,EAAiB;AAC7C,YAAMkB,MAAM,GAAGnB,IAAI,CAACM,MAAL,CAAYC,IAAZ,GAAmB,IAAnB,GAA0B,KAAzC;AACA,YAAMF,IAAI,GAAGL,IAAI,CAACM,MAAL,CAAYC,IAAzB;AACA,YAAMa,gBAAgB,GACpB,oBAAC,QAAD;AACE,UAAA,GAAG,EAAEpB,IAAI,CAACY,EADZ;AAEE,UAAA,IAAI,EAAEZ,IAAI,CAACM,MAFb;AAGE,UAAA,SAAS,EAAEL,KAHb;AAIE,UAAA,IAAI,EAAEG,IAJR;AAKE,UAAA,OAAO,EAAE,iBAACS,CAAD,EAAO;AAACV,YAAAA,iBAAiB,CAACU,CAAD,EAAIb,IAAI,CAACY,EAAT,EAAaR,IAAb,CAAjB;AAAoC,WALvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;;AAUA,YAAIJ,IAAI,CAACM,MAAL,CAAYe,QAAZ,KAAyB,MAA7B,EAAqC;AACnCN,UAAAA,QAAQ,CAACO,IAAT,CAActB,IAAI,CAACM,MAAnB,EADmC,CAEnC;;AACA;AACD;;AAED,eAAOa,MAAM,GAAGd,IAAI,CAAC,CAAD,CAAJ,KAAY,MAAZ,GAAqB,KAAI,CAACkB,WAAL,CAAiBvB,IAAjB,EAAuBC,KAAvB,CAArB,GAAqD,KAAI,CAACuB,OAAL,CAAaxB,IAAb,EAAmBC,KAAnB,CAAxD,GAAoFmB,gBAAjG;AACD,OApBa,CAAd;;AAsBA,UAAIlB,SAAS,CAACM,MAAV,KAAqB,CAAzB,EAA4B;AAC1B;AACAS,QAAAA,OAAO,CAACK,IAAR,CAAa,oBAAC,QAAD;AAAU,UAAA,GAAG,EAAEG,IAAI,CAACC,MAAL,CAAY,GAAZ,CAAf;AAAiC,UAAA,QAAQ,EAAEX,QAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAb;AACD;;AAEDE,MAAAA,OAAO,GAAGA,OAAO,CAACC,GAAR,CAAY,UAAAlB,IAAI,EAAI;AAC5B,YAAIA,IAAI,IAAIA,IAAI,KAAK,EAAjB,IAAuBA,IAAI,CAAC2B,IAAL,CAAUjC,IAAV,KAAmB,UAA9C,EAA0D;AACxDsB,UAAAA,YAAY;AACZ,iBACE,oBAAC,QAAD;AACE,YAAA,GAAG,EAAEhB,IAAI,CAAC4B,GADZ;AAEE,YAAA,IAAI,EAAE5B,IAAI,CAACP,KAAL,CAAWO,IAFnB;AAGE,YAAA,SAAS,EAAEgB,YAHb;AAIE,YAAA,IAAI,EAAEZ,IAJR;AAKE,YAAA,OAAO,EAAE,iBAACS,CAAD,EAAO;AAACV,cAAAA,iBAAiB,CAACU,CAAD,EAAIb,IAAI,CAACY,EAAT,EAAaR,IAAb,CAAjB;AAAoC,aALvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AASD,SAXD,MAWO;AACL,iBAAOJ,IAAP;AACD;AACF,OAfS,CAAV;AAiBA,aAAOiB,OAAP;AACD;;;6BAEQ;AAAA,yBAC0B,KAAKxB,KAD/B;AAAA,UACDC,IADC,gBACDA,IADC;AAAA,UACKO,KADL,gBACKA,KADL;AAAA,UACYC,SADZ,gBACYA,SADZ;AAEP,UAAI2B,UAAU,GAAG,EAAjB;;AACA,UAAInC,IAAI,CAACoC,OAAL,CAAa,GAAb,MAAsB,CAAC,CAA3B,EAA8B;AAC5BD,QAAAA,UAAU,GAAGnC,IAAI,CAACqC,SAAL,CAAgBrC,IAAI,CAACoC,OAAL,CAAa,GAAb,IAAoB,CAApC,EAAwCpC,IAAI,CAACc,MAA7C,CAAb;AACAd,QAAAA,IAAI,GAAGA,IAAI,CAACqC,SAAL,CAAe,CAAf,EAAkBrC,IAAI,CAACoC,OAAL,CAAa,GAAb,CAAlB,CAAP;AACD;;AACD,UAAI5B,SAAS,CAACM,MAAV,GAAmB,CAAvB,EAA0B;AACxBN,QAAAA,SAAS,GAAGA,SAAS,CAAC8B,IAAV,CAAe,IAAf,CAAZ;AACAtC,QAAAA,IAAI,GAAGQ,SAAS,CACf+B,OADM,CACE,IAAIC,MAAJ,CAAW,SAAX,CADF,EACyB,YADzB,EAEND,OAFM,CAEE,IAAIC,MAAJ,CAAW,UAAX,CAFF,EAE0B,OAF1B,EAGND,OAHM,CAGE,IAAIC,MAAJ,CAAW,UAAX,CAHF,EAG0B,aAH1B,CAAP;AAID;;AAAA;AAED,UAAIjB,OAAO,GAAG,KAAKkB,UAAL,EAAd;;AAEA,UAAIlB,OAAO,CAACmB,KAAR,CAAc,CAAC,CAAf,EAAkB,CAAlB,MAAyBC,SAA7B,EAAwC;AACtC,eAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACD,OAFD,MAEO;AACL,eACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAI,UAAA,SAAS,oBAAcpC,KAAK,KAAK,CAAV,GAAc,eAAd,GAAgC,EAA9C,CAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAsEP,IAAtE,EAA4E;AAAM,UAAA,SAAS,EAAC,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAA+BmC,UAA/B,CAA5E,CADF,EAEIZ,OAFJ,CADF;AAOD;AACF;;;;EAvImB9B,KAAK,CAACmD,S;;AA0I5B,eAAe9C,OAAf","sourcesContent":["import React from 'react'\nimport ReactDOM from 'react-dom';\nimport MenuItem from './MenuItem';\nimport MenuList from './MenuList';\nimport MenuInfo from './MenuInfo';\n\nclass Section extends React.Component {\n\n  componentDidMount(){\n    const { name, setSectionPosition } = this.props;\n    const position = ReactDOM\n      .findDOMNode(this).offsetTop;\n    setSectionPosition(name.split('%')[0], position);\n  }\n\n  \n\n  processItem(item, index){\n    const {\n      tagsInUse,\n      routeToItemDetail,\n      lang,\n    } = this.props;\n    const tags = item.fields.Tags;\n\n    // If menu item tags match any tags in filter\n    if ((tagsInUse.length > 0 && tagsInUse.some(tag => tags.includes(tag)))\n      || tagsInUse.length === 0) {\n        return (\n          <MenuItem\n            key={item.id}\n            item={item.fields}\n            itemIndex={index}\n            lang={lang}\n            onClick={(e) => {routeToItemDetail(e, item.id, lang)}}\n          />\n        );\n      }\n\n    return '';\n  }\n\n  getList(item, index){\n    const { routeToItemDetail } = this.props;\n    return (\n      <MenuList\n        key={item.id}\n        // disable menu list item click until ordering\n        onClick={(e) => {routeToItemDetail(e, item.id)}}\n        item={item.fields}\n        itemIndex={index}\n      />\n    );\n  }\n\n  getSection(){\n    const {\n      menuSection,\n      lang,\n      routeToItemDetail,\n      tagsInUse,\n    } = this.props;\n\n    let infoList = [];\n    let updatedIndex = -1;\n\n    let section = menuSection.map((item, index) => {\n      const hasTag = item.fields.Tags ? true : false;\n      const tags = item.fields.Tags;\n      const menuItemTemplate = (\n        <MenuItem\n          key={item.id}\n          item={item.fields}\n          itemIndex={index}\n          lang={lang}\n          onClick={(e) => {routeToItemDetail(e, item.id, lang)}}\n        />\n      );\n\n      if (item.fields.itemType === 'info') {\n        infoList.push(item.fields)\n        // eslint-disable-next-line\n        return\n      }\n\n      return hasTag ? tags[0] !== 'LIST' ? this.processItem(item, index) : this.getList(item, index) : menuItemTemplate\n    });\n\n    if (tagsInUse.length === 0) {\n      // TODO: find a better unique key for this lol (lazy ass)\n      section.push(<MenuInfo key={Math.random(999)} infoList={infoList} />)\n    }\n\n    section = section.map(item => {\n      if (item && item !== '' && item.type.name === 'MenuItem') {\n        updatedIndex ++\n        return (\n          <MenuItem\n            key={item.key}\n            item={item.props.item}\n            itemIndex={updatedIndex}\n            lang={lang}\n            onClick={(e) => {routeToItemDetail(e, item.id, lang)}}\n          />\n        )\n      } else {\n        return item\n      }\n    })\n\n    return section\n  }\n\n  render() {\n    let { name, index, tagsInUse } = this.props\n    let subSection = \"\"\n    if (name.indexOf(\"%\") !== -1) {\n      subSection = name.substring((name.indexOf('%') + 1), name.length)\n      name = name.substring(0, name.indexOf('%'))\n    }\n    if (tagsInUse.length > 0) {\n      tagsInUse = tagsInUse.join(', ')\n      name = tagsInUse\n      .replace(new RegExp(\"\\\\bV\\\\b\"), 'Vegetarian')\n      .replace(new RegExp(\"\\\\bVE\\\\b\"), 'Vegan')\n      .replace(new RegExp(\"\\\\bGF\\\\b\"), 'Gluten Free')\n    };\n\n    let section = this.getSection()\n\n    if (section.slice(-1)[0] === undefined) {\n      return <div></div>\n    } else {\n      return (\n        <div>\n          <h2 className={`section ${ index === 0 ? 'sectionTaller' : '' }` } >{ name }<span className=\"subSection\">{ subSection }</span></h2>\n          { section }\n        </div>\n\n      )\n    }\n  }\n}\n\nexport default Section\n"]},"metadata":{},"sourceType":"module"}