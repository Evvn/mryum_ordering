{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\Documents\\\\GitHub\\\\mryum-avc\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _slicedToArray from \"D:\\\\Documents\\\\GitHub\\\\mryum-avc\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _asyncToGenerator from \"D:\\\\Documents\\\\GitHub\\\\mryum-avc\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"D:\\\\Documents\\\\GitHub\\\\mryum-avc\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\Documents\\\\GitHub\\\\mryum-avc\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\Documents\\\\GitHub\\\\mryum-avc\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\Documents\\\\GitHub\\\\mryum-avc\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\Documents\\\\GitHub\\\\mryum-avc\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\Documents\\\\GitHub\\\\mryum-avc\\\\src\\\\components\\\\Common\\\\MenuSearch.js\";\nimport React from 'react';\n\nvar MenuSearch =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(MenuSearch, _React$Component);\n\n  function MenuSearch(props) {\n    var _this;\n\n    _classCallCheck(this, MenuSearch);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MenuSearch).call(this, props));\n\n    _this.search =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(input) {\n        var data, _dataKeys, expression, big_bucket, sectionsPromise, pricePromise, itemNamePromise, itemDescriptionPromise, _ref2, _ref3, sections, price, itemName, itemDesc;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                data = _this.props.data;\n                _dataKeys = Object.keys(data);\n\n                if (!input) {\n                  _context.next = 17;\n                  break;\n                }\n\n                expression = new RegExp(\"\".concat(input), 'gi');\n                big_bucket = []; // refactor to run async\n\n                sectionsPromise = new Promise(function (resolve) {\n                  var bucket = [];\n\n                  for (var _i = 0, _dataKeys2 = _dataKeys; _i < _dataKeys2.length; _i++) {\n                    var key = _dataKeys2[_i];\n                    var fields = data[key].fields;\n\n                    if (expression.test(fields['category'])) {\n                      var _fields = data[key].fields;\n\n                      var searchScore = _this.score(_fields['category'], expression);\n\n                      bucket.push({\n                        result: _fields['category'],\n                        score: searchScore\n                      });\n                    }\n                  }\n\n                  resolve(bucket);\n                });\n                pricePromise = new Promise(function (resolve) {\n                  var bucket = [];\n                  var expression = new RegExp(\"\".concat(input), 'gi');\n\n                  for (var _i2 = 0, _dataKeys3 = _dataKeys; _i2 < _dataKeys3.length; _i2++) {\n                    var key = _dataKeys3[_i2];\n                    var fields = data[key].fields;\n\n                    if (expression.test(fields['price'])) {\n                      var _fields2 = data[key].fields;\n\n                      var searchScore = _this.score(_fields2['price'].toString(), expression);\n\n                      bucket.push({\n                        result: _fields2['price'],\n                        score: searchScore\n                      });\n                    }\n                  }\n\n                  console.log(bucket);\n                  resolve(bucket);\n                });\n                itemNamePromise = new Promise(function (resolve) {\n                  var bucket = [];\n\n                  for (var _i3 = 0, _dataKeys4 = _dataKeys; _i3 < _dataKeys4.length; _i3++) {\n                    var key = _dataKeys4[_i3];\n                    var fields = data[key].fields;\n\n                    if (expression.test(fields['name'])) {\n                      var _fields3 = data[key].fields;\n\n                      var searchScore = _this.score(_fields3['name'], expression);\n\n                      bucket.push({\n                        result: _fields3['name'],\n                        score: searchScore\n                      });\n                    }\n                  }\n\n                  resolve(bucket);\n                });\n                itemDescriptionPromise = new Promise(function (resolve) {\n                  var bucket = [];\n\n                  for (var _i4 = 0, _dataKeys5 = _dataKeys; _i4 < _dataKeys5.length; _i4++) {\n                    var key = _dataKeys5[_i4];\n                    var fields = data[key].fields;\n\n                    if (expression.test(fields['description'])) {\n                      var _fields4 = data[key].fields;\n\n                      var searchScore = _this.score(_fields4['description'], expression);\n\n                      bucket.push({\n                        result: _fields4['description'],\n                        score: searchScore\n                      });\n                    }\n                  }\n\n                  resolve(bucket);\n                });\n                _context.next = 11;\n                return Promise.all([sectionsPromise, pricePromise, itemNamePromise, itemDescriptionPromise]);\n\n              case 11:\n                _ref2 = _context.sent;\n                _ref3 = _slicedToArray(_ref2, 4);\n                sections = _ref3[0];\n                price = _ref3[1];\n                itemName = _ref3[2];\n                itemDesc = _ref3[3];\n\n              case 17:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.score = function (entry, regex) {\n      var matched = entry.match(regex);\n\n      if (matched) {\n        var result = matched.length / entry.length;\n        return result.toFixed(3);\n      }\n    };\n\n    _this.result = [];\n    return _this;\n  } // Sections: Drinks, Price: 4, Item Name: Coffee | Tea | Etc, Item Description: Batch Brew Filter \n\n\n  _createClass(MenuSearch, [{\n    key: \"render\",\n    value: function render() {\n      var data = this.props.data;\n      this.search('4').then(function (oops) {\n        console.log(oops);\n      });\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, 'hello');\n    }\n  }]);\n\n  return MenuSearch;\n}(React.Component);\n\nexport default MenuSearch;","map":{"version":3,"sources":["D:\\Documents\\GitHub\\mryum-avc\\src\\components\\Common\\MenuSearch.js"],"names":["React","MenuSearch","props","search","input","data","_dataKeys","Object","keys","expression","RegExp","big_bucket","sectionsPromise","Promise","resolve","bucket","key","fields","test","searchScore","score","push","result","pricePromise","toString","console","log","itemNamePromise","itemDescriptionPromise","all","sections","price","itemName","itemDesc","entry","regex","matched","match","length","toFixed","then","oops","Component"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;;IAEMC,U;;;;;AACF,sBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,oFAAMA,KAAN;;AADe,UAMnBC,MANmB;AAAA;AAAA;AAAA;AAAA;AAAA,+BAMV,iBAAMC,KAAN;AAAA;;AAAA;AAAA;AAAA;AAAA;AACEC,gBAAAA,IADF,GACU,MAAKH,KADf,CACEG,IADF;AAECC,gBAAAA,SAFD,GAEaC,MAAM,CAACC,IAAP,CAAYH,IAAZ,CAFb;;AAAA,qBAGDD,KAHC;AAAA;AAAA;AAAA;;AAIGK,gBAAAA,UAJH,GAIgB,IAAIC,MAAJ,WAAcN,KAAd,GAAuB,IAAvB,CAJhB;AAMGO,gBAAAA,UANH,GAMgB,EANhB,EAQD;;AACIC,gBAAAA,eATH,GASqB,IAAIC,OAAJ,CAAY,UAAAC,OAAO,EAAI;AACzC,sBAAIC,MAAM,GAAG,EAAb;;AACA,gDAAkBT,SAAlB,gCAA6B;AAAxB,wBAAMU,GAAG,iBAAT;AACD,wBAAIC,MAAM,GAAGZ,IAAI,CAACW,GAAD,CAAJ,CAAUC,MAAvB;;AACA,wBAAIR,UAAU,CAACS,IAAX,CAAgBD,MAAM,CAAC,UAAD,CAAtB,CAAJ,EAAyC;AACrC,0BAAIA,OAAM,GAAGZ,IAAI,CAACW,GAAD,CAAJ,CAAUC,MAAvB;;AACA,0BAAIE,WAAW,GAAG,MAAKC,KAAL,CAAWH,OAAM,CAAC,UAAD,CAAjB,EAA+BR,UAA/B,CAAlB;;AACAM,sBAAAA,MAAM,CAACM,IAAP,CAAY;AAACC,wBAAAA,MAAM,EAAEL,OAAM,CAAC,UAAD,CAAf;AAA6BG,wBAAAA,KAAK,EAAED;AAApC,uBAAZ;AACH;AACJ;;AAEDL,kBAAAA,OAAO,CAACC,MAAD,CAAP;AACH,iBAZqB,CATrB;AAuBGQ,gBAAAA,YAvBH,GAuBkB,IAAIV,OAAJ,CAAY,UAAAC,OAAO,EAAI;AACtC,sBAAIC,MAAM,GAAG,EAAb;AACA,sBAAIN,UAAU,GAAG,IAAIC,MAAJ,WAAcN,KAAd,GAAuB,IAAvB,CAAjB;;AACA,iDAAkBE,SAAlB,kCAA6B;AAAxB,wBAAMU,GAAG,kBAAT;AACD,wBAAIC,MAAM,GAAGZ,IAAI,CAACW,GAAD,CAAJ,CAAUC,MAAvB;;AAEA,wBAAIR,UAAU,CAACS,IAAX,CAAgBD,MAAM,CAAC,OAAD,CAAtB,CAAJ,EAAsC;AAClC,0BAAIA,QAAM,GAAGZ,IAAI,CAACW,GAAD,CAAJ,CAAUC,MAAvB;;AACA,0BAAIE,WAAW,GAAG,MAAKC,KAAL,CAAWH,QAAM,CAAC,OAAD,CAAN,CAAgBO,QAAhB,EAAX,EAAuCf,UAAvC,CAAlB;;AACAM,sBAAAA,MAAM,CAACM,IAAP,CAAY;AAACC,wBAAAA,MAAM,EAAEL,QAAM,CAAC,OAAD,CAAf;AAA0BG,wBAAAA,KAAK,EAAED;AAAjC,uBAAZ;AACH;AACJ;;AACDM,kBAAAA,OAAO,CAACC,GAAR,CAAYX,MAAZ;AACAD,kBAAAA,OAAO,CAACC,MAAD,CAAP;AACH,iBAdkB,CAvBlB;AAuCGY,gBAAAA,eAvCH,GAuCqB,IAAId,OAAJ,CAAY,UAAAC,OAAO,EAAI;AACzC,sBAAIC,MAAM,GAAG,EAAb;;AACA,iDAAkBT,SAAlB,kCAA6B;AAAxB,wBAAMU,GAAG,kBAAT;AACD,wBAAIC,MAAM,GAAGZ,IAAI,CAACW,GAAD,CAAJ,CAAUC,MAAvB;;AAEA,wBAAIR,UAAU,CAACS,IAAX,CAAgBD,MAAM,CAAC,MAAD,CAAtB,CAAJ,EAAqC;AACjC,0BAAIA,QAAM,GAAGZ,IAAI,CAACW,GAAD,CAAJ,CAAUC,MAAvB;;AACA,0BAAIE,WAAW,GAAG,MAAKC,KAAL,CAAWH,QAAM,CAAC,MAAD,CAAjB,EAA2BR,UAA3B,CAAlB;;AACAM,sBAAAA,MAAM,CAACM,IAAP,CAAY;AAACC,wBAAAA,MAAM,EAAEL,QAAM,CAAC,MAAD,CAAf;AAAyBG,wBAAAA,KAAK,EAAED;AAAhC,uBAAZ;AACH;AACJ;;AACDL,kBAAAA,OAAO,CAACC,MAAD,CAAP;AACH,iBAZqB,CAvCrB;AAqDGa,gBAAAA,sBArDH,GAqD4B,IAAIf,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAChD,sBAAIC,MAAM,GAAG,EAAb;;AACA,iDAAkBT,SAAlB,kCAA6B;AAAxB,wBAAMU,GAAG,kBAAT;AACD,wBAAIC,MAAM,GAAGZ,IAAI,CAACW,GAAD,CAAJ,CAAUC,MAAvB;;AAEA,wBAAIR,UAAU,CAACS,IAAX,CAAgBD,MAAM,CAAC,aAAD,CAAtB,CAAJ,EAA4C;AACxC,0BAAIA,QAAM,GAAGZ,IAAI,CAACW,GAAD,CAAJ,CAAUC,MAAvB;;AACA,0BAAIE,WAAW,GAAG,MAAKC,KAAL,CAAWH,QAAM,CAAC,aAAD,CAAjB,EAAkCR,UAAlC,CAAlB;;AACAM,sBAAAA,MAAM,CAACM,IAAP,CAAY;AAACC,wBAAAA,MAAM,EAAEL,QAAM,CAAC,aAAD,CAAf;AAAgCG,wBAAAA,KAAK,EAAED;AAAvC,uBAAZ;AACH;AACJ;;AACDL,kBAAAA,OAAO,CAACC,MAAD,CAAP;AACH,iBAZ4B,CArD5B;AAAA;AAAA,uBAqEmDF,OAAO,CAACgB,GAAR,CAAY,CAACjB,eAAD,EAAkBW,YAAlB,EAAgCI,eAAhC,EAAiDC,sBAAjD,CAAZ,CArEnD;;AAAA;AAAA;AAAA;AAqEME,gBAAAA,QArEN;AAqEgBC,gBAAAA,KArEhB;AAqEuBC,gBAAAA,QArEvB;AAqEiCC,gBAAAA,QArEjC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OANU;;AAAA;AAAA;AAAA;AAAA;;AAAA,UAwFnBb,KAxFmB,GAwFX,UAACc,KAAD,EAAQC,KAAR,EAAkB;AACtB,UAAIC,OAAO,GAAGF,KAAK,CAACG,KAAN,CAAYF,KAAZ,CAAd;;AACA,UAAIC,OAAJ,EAAa;AACT,YAAId,MAAM,GAAGc,OAAO,CAACE,MAAR,GAAiBJ,KAAK,CAACI,MAApC;AACA,eAAOhB,MAAM,CAACiB,OAAP,CAAe,CAAf,CAAP;AACH;AACJ,KA9FkB;;AAEf,UAAKjB,MAAL,GAAc,EAAd;AAFe;AAGlB,G,CAED;;;;;6BA2FS;AAAA,UACEjB,IADF,GACU,KAAKH,KADf,CACEG,IADF;AAEL,WAAKF,MAAL,CAAY,GAAZ,EAAiBqC,IAAjB,CAAsB,UAAAC,IAAI,EAAI;AAC1BhB,QAAAA,OAAO,CAACC,GAAR,CAAYe,IAAZ;AACH,OAFD;AAGA,aACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACM,OADN,CADJ;AAKH;;;;EA3GoBzC,KAAK,CAAC0C,S;;AA8G/B,eAAezC,UAAf","sourcesContent":["import React from 'react';\r\n\r\nclass MenuSearch extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.result = [];\r\n    }\r\n\r\n    // Sections: Drinks, Price: 4, Item Name: Coffee | Tea | Etc, Item Description: Batch Brew Filter \r\n    search = async input => {\r\n        const {data} = this.props;\r\n        const _dataKeys = Object.keys(data);\r\n        if (input) {\r\n            let expression = new RegExp(`${input}`, 'gi');\r\n            \r\n            let big_bucket = [];\r\n            \r\n            // refactor to run async\r\n            let sectionsPromise = new Promise(resolve => {\r\n                let bucket = [];\r\n                for (const key of _dataKeys) {\r\n                    let fields = data[key].fields;\r\n                    if (expression.test(fields['category'])) {\r\n                        let fields = data[key].fields;\r\n                        let searchScore = this.score(fields['category'], expression);\r\n                        bucket.push({result: fields['category'], score: searchScore});\r\n                    }\r\n                }\r\n                \r\n                resolve(bucket);\r\n            });\r\n\r\n            let pricePromise = new Promise(resolve => {\r\n                let bucket = [];\r\n                let expression = new RegExp(`${input}`, 'gi');\r\n                for (const key of _dataKeys) {\r\n                    let fields = data[key].fields;\r\n                    \r\n                    if (expression.test(fields['price'])) {\r\n                        let fields = data[key].fields;\r\n                        let searchScore = this.score(fields['price'].toString(), expression);\r\n                        bucket.push({result: fields['price'], score: searchScore});\r\n                    }\r\n                }\r\n                console.log(bucket)\r\n                resolve(bucket);\r\n            });\r\n\r\n            let itemNamePromise = new Promise(resolve => {\r\n                let bucket = [];\r\n                for (const key of _dataKeys) {\r\n                    let fields = data[key].fields;\r\n                \r\n                    if (expression.test(fields['name'])) {\r\n                        let fields = data[key].fields;\r\n                        let searchScore = this.score(fields['name'], expression);\r\n                        bucket.push({result: fields['name'], score: searchScore});\r\n                    }\r\n                }\r\n                resolve(bucket);\r\n            });\r\n\r\n            let itemDescriptionPromise = new Promise(resolve => {\r\n                let bucket = [];\r\n                for (const key of _dataKeys) {\r\n                    let fields = data[key].fields;\r\n                \r\n                    if (expression.test(fields['description'])) {\r\n                        let fields = data[key].fields;\r\n                        let searchScore = this.score(fields['description'], expression);\r\n                        bucket.push({result: fields['description'], score: searchScore});\r\n                    }\r\n                }\r\n                resolve(bucket);\r\n            });\r\n            \r\n            \r\n\r\n            const [sections, price, itemName, itemDesc] = await Promise.all([sectionsPromise, pricePromise, itemNamePromise, itemDescriptionPromise]);\r\n\r\n            \r\n        \r\n            // expression.sort((a,b) => (a.score < b.score) ? 1 : ((b.score < a.score) ? -1 : 0));\r\n            // let actionables = [];\r\n            // bucket.map(x => actionables.push(x.result));\r\n            // this.result = actionables;\r\n            //console.log(sections);\r\n\r\n        }\r\n    }\r\n\r\n    score = (entry, regex) => {\r\n        let matched = entry.match(regex);\r\n        if (matched) {\r\n            let result = matched.length / entry.length;\r\n            return result.toFixed(3);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {data} = this.props;\r\n        this.search('4').then(oops => {\r\n            console.log(oops)\r\n        })\r\n        return ( \r\n            <div> \r\n                { 'hello' } \r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default MenuSearch;"]},"metadata":{},"sourceType":"module"}