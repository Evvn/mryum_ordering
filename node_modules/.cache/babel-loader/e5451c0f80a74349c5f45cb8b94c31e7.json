{"ast":null,"code":"// eslint-disable-next-line\nimport { applyMiddleware, compose, createStore } from 'redux';\nimport { persistStore, persistReducer, createMigrate } from 'redux-persist';\nimport { routerMiddleware } from 'connected-react-router';\nimport storage from 'redux-persist/lib/storage';\nimport { createBrowserHistory } from 'history';\nimport makeRootReducer from './rootReducer';\nimport createSagaMiddleware from 'redux-saga';\nimport rootSaga from './integration/sagas/rootSaga.js';\nimport autoMergeLevel2 from 'redux-persist/es/stateReconciler/autoMergeLevel2';\nimport migrations from './migrations/reduxPersistMigrations';\nexport var history = createBrowserHistory();\nexport default (function () {\n  var initialState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var sagaMiddleware = createSagaMiddleware();\n  var persistConfig = {\n    key: 'root',\n    storage: storage,\n    version: 2,\n    stateReconciler: autoMergeLevel2,\n    migrate: createMigrate(migrations, {\n      debug: false\n    }),\n    blacklist: ['router', 'menu', 'common']\n  };\n  var middleware = [routerMiddleware(history), sagaMiddleware];\n  var enhancers = [];\n  var store = ''; // for dev\n\n  if (process.env.REACT_APP_REDUX_DEV_TOOLS === 'false') {\n    store = createStore(persistReducer(persistConfig, makeRootReducer(history)), initialState, window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\n      trace: true\n    }).apply(void 0, [applyMiddleware.apply(void 0, middleware)].concat(enhancers)));\n  } // for prod\n  else {\n      store = createStore(persistReducer(persistConfig, makeRootReducer(history)), initialState, compose.apply(void 0, [applyMiddleware.apply(void 0, middleware)].concat(enhancers)));\n    }\n\n  store.asyncReducers = {};\n  sagaMiddleware.run(rootSaga);\n  window.store = store;\n  var persistor = persistStore(store);\n  return {\n    store: store,\n    persistor: persistor\n  };\n});","map":{"version":3,"sources":["D:\\Documents\\GitHub\\mryum-avc\\src\\Store.js"],"names":["applyMiddleware","compose","createStore","persistStore","persistReducer","createMigrate","routerMiddleware","storage","createBrowserHistory","makeRootReducer","createSagaMiddleware","rootSaga","autoMergeLevel2","migrations","history","initialState","sagaMiddleware","persistConfig","key","version","stateReconciler","migrate","debug","blacklist","middleware","enhancers","store","process","env","REACT_APP_REDUX_DEV_TOOLS","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","trace","asyncReducers","run","persistor"],"mappings":"AAAA;AACA,SAASA,eAAT,EAA0BC,OAA1B,EAAmCC,WAAnC,QAAsD,OAAtD;AACA,SAASC,YAAT,EAAuBC,cAAvB,EAAuCC,aAAvC,QAA4D,eAA5D;AACA,SAASC,gBAAT,QAAiC,wBAAjC;AACA,OAAOC,OAAP,MAAoB,2BAApB;AACA,SAASC,oBAAT,QAAqC,SAArC;AACA,OAAOC,eAAP,MAA4B,eAA5B;AACA,OAAOC,oBAAP,MAAiC,YAAjC;AACA,OAAOC,QAAP,MAAqB,iCAArB;AACA,OAAOC,eAAP,MAA4B,kDAA5B;AACA,OAAOC,UAAP,MAAuB,qCAAvB;AAEA,OAAO,IAAMC,OAAO,GAAGN,oBAAoB,EAApC;AAEP,gBAAe,YAAuB;AAAA,MAAtBO,YAAsB,uEAAP,EAAO;AAEpC,MAAMC,cAAc,GAAGN,oBAAoB,EAA3C;AACA,MAAMO,aAAa,GAAG;AACpBC,IAAAA,GAAG,EAAE,MADe;AAEpBX,IAAAA,OAAO,EAAPA,OAFoB;AAGpBY,IAAAA,OAAO,EAAE,CAHW;AAIpBC,IAAAA,eAAe,EAAER,eAJG;AAKpBS,IAAAA,OAAO,EAAEhB,aAAa,CAACQ,UAAD,EAAa;AAACS,MAAAA,KAAK,EAAE;AAAR,KAAb,CALF;AAMpBC,IAAAA,SAAS,EAAE,CAAC,QAAD,EAAW,MAAX,EAAmB,QAAnB;AANS,GAAtB;AASA,MAAMC,UAAU,GAAG,CACjBlB,gBAAgB,CAACQ,OAAD,CADC,EAEjBE,cAFiB,CAAnB;AAIA,MAAMS,SAAS,GAAG,EAAlB;AACA,MAAIC,KAAK,GAAG,EAAZ,CAjBoC,CAmBpC;;AACA,MAAIC,OAAO,CAACC,GAAR,CAAYC,yBAAZ,KAA0C,OAA9C,EAAuD;AACrDH,IAAAA,KAAK,GAAGxB,WAAW,CACjBE,cAAc,CAACa,aAAD,EAAgBR,eAAe,CAACK,OAAD,CAA/B,CADG,EAEjBC,YAFiB,EAGjBe,MAAM,CAACC,oCAAP,CAA4C;AAC1CC,MAAAA,KAAK,EAAE;AADmC,KAA5C,iBAEGhC,eAAe,MAAf,SAAmBwB,UAAnB,CAFH,SAEsCC,SAFtC,EAHiB,CAAnB;AAOD,GARD,CAQE;AARF,OASK;AACHC,MAAAA,KAAK,GAAGxB,WAAW,CACjBE,cAAc,CAACa,aAAD,EAAgBR,eAAe,CAACK,OAAD,CAA/B,CADG,EAEjBC,YAFiB,EAGjBd,OAAO,MAAP,UAAQD,eAAe,MAAf,SAAmBwB,UAAnB,CAAR,SAA2CC,SAA3C,EAHiB,CAAnB;AAKD;;AAEDC,EAAAA,KAAK,CAACO,aAAN,GAAsB,EAAtB;AACAjB,EAAAA,cAAc,CAACkB,GAAf,CAAmBvB,QAAnB;AAEAmB,EAAAA,MAAM,CAACJ,KAAP,GAAeA,KAAf;AACA,MAAIS,SAAS,GAAGhC,YAAY,CAACuB,KAAD,CAA5B;AACA,SAAO;AAAEA,IAAAA,KAAK,EAALA,KAAF;AAASS,IAAAA,SAAS,EAATA;AAAT,GAAP;AACD,CA3CD","sourcesContent":["// eslint-disable-next-line\r\nimport { applyMiddleware, compose, createStore } from 'redux';\r\nimport { persistStore, persistReducer, createMigrate } from 'redux-persist'\r\nimport { routerMiddleware } from 'connected-react-router';\r\nimport storage from 'redux-persist/lib/storage'\r\nimport { createBrowserHistory } from 'history'\r\nimport makeRootReducer from './rootReducer';\r\nimport createSagaMiddleware from 'redux-saga';\r\nimport rootSaga from './integration/sagas/rootSaga.js'\r\nimport autoMergeLevel2 from 'redux-persist/es/stateReconciler/autoMergeLevel2';\r\nimport migrations from './migrations/reduxPersistMigrations';\r\n\r\nexport const history = createBrowserHistory();\r\n\r\nexport default (initialState = {}) => {\r\n\r\n  const sagaMiddleware = createSagaMiddleware();\r\n  const persistConfig = {\r\n    key: 'root',\r\n    storage,\r\n    version: 2,\r\n    stateReconciler: autoMergeLevel2,\r\n    migrate: createMigrate(migrations, {debug: false}),\r\n    blacklist: ['router', 'menu', 'common']\r\n  }\r\n\r\n  const middleware = [\r\n    routerMiddleware(history),\r\n    sagaMiddleware,\r\n  ];\r\n  const enhancers = [];\r\n  let store = '';\r\n\r\n  // for dev\r\n  if (process.env.REACT_APP_REDUX_DEV_TOOLS === 'false') {\r\n    store = createStore(\r\n      persistReducer(persistConfig, makeRootReducer(history)),\r\n      initialState,\r\n      window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\r\n        trace: true,\r\n      })(applyMiddleware(...middleware), ...enhancers),\r\n    );\r\n  } // for prod\r\n  else {\r\n    store = createStore(\r\n      persistReducer(persistConfig, makeRootReducer(history)),\r\n      initialState,\r\n      compose(applyMiddleware(...middleware), ...enhancers),\r\n    );\r\n  }\r\n\r\n  store.asyncReducers = {};\r\n  sagaMiddleware.run(rootSaga)\r\n\r\n  window.store = store;\r\n  let persistor = persistStore(store)\r\n  return { store, persistor} ;\r\n};\r\n"]},"metadata":{},"sourceType":"module"}